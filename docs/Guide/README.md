# Installation and Deployment Guide
## Table of Contents
1. [Project Overview](#Overview)
2. [Prerequisites](#Prerequisites)
3. [Installation Guide](#installation-guide)
4. [Deployment Guide](#deploy-guide)
5. [Contact Information](#contact-information)

## Overview
#### Introduction
With the widespread use of social media and online digital media, the authenticity of photos and creative images has become a global concern. In this digital age, the extensive dissemination of images and advanced editing techniques make it difficult for ordinary users and consumers to discern the authenticity and credibility of images. Misleading, manipulated, or artificially generated images can lead to inaccurate and confusing information dissemination.

#### Purpose
The project takes inspiration from Dr Sabrinaâ€™s ambition to create a reliable community platform as a source of trustworthy pictures. The objective of the project is to provide trust indicators that identify and differentiate media, primarily images, on the basis of their origins. These origins are initially recognised as sources from creators or artists, artificially generated images and modified or manipulated pictures. The impact of the project is expected to influence the way media assets are perceived by individual users and organisations. Trustworthy media assets can be utilised to preserve the emotions, values, ideas, and information they carry and pass them on without the fear of losing integrity.

#### Features
1. Backend:
- `app.py`: This is the main executable Python script where the Flask application is defined and configured. 
2. Frontend:
- `templates/html`: In the templates directory, you have HTML files that serve as the frontend templates Flask will render. 
- `static`: This folder typically stores CSS, JavaScript, and static images used across the project. `css` and `js` folders for styling and JavaScript files that enhance the frontend. `profilephotos` and `images` store website background pictures and user profile photos used in the UI. 
- `instance`: This folder stores the Database generated by `database.py`. 
3. Database: 
- database.py: This script manages database connections and operations, using SQLAlchemy, which is a Python SQL toolkit.
4. Credibility Signals:
The design and explanation of Credibility Signals can be found [here](https://github.com/Trust-Indicator/Trust-Indicator/tree/main/docs/Credibility%20Signals).
5. EXIF:
The Metadata Extractor Guide can be found [here](https://github.com/Trust-Indicator/Trust-Indicator/blob/main/pre_work/Metadata%20Extractor%20Explanation/Manual.md).
6. PS Detector: 
- `trust_indicator/PS_Detector`: A tamper detection and localisation model based on Convnext-Upernet is constructed by using the pure convolutional neural network model Convnext as the backbone network and extracting multi-scale features in images with the help of the unified perceptual parsing network Upernet. On this basis, this study further applies the self-supervised data enhancement method to amplify the tampering traces in the image and improves the accuracy of tampering image detection and localisation by using an image classification loss function independent of the tampering detection and localisation task.
8. AIGC Detector:
- The codebase includes scripts for training, validation, and inference on single objects, as well as model weight files. The training dataset is sourced from the GenImage sdv1.5 dataset, which can be accessed at the following link: https://pan.baidu.com/s/1i0OFqYN5i6oFAxeK6bIwRQ#list/path=%2F (Access code: ztf1). 

## Prerequisites
Before you begin, ensure your system meets the following requirements:
#### System Requirements
- Operating System: Compatible with Windows, macOS, or Linux. Specific dependencies like torch with CUDA support might require specific OS versions or configurations for optimal performance.
- Python Version: **Python 3.7** or later. Some dependencies may not support earlier versions of Python.
#### Software and Libraries
To run this project, you need to have the following software and libraries installed:
- Python: As the primary programming language.
- Pip: Python's package installer, used to install the libraries listed in requirements.txt.
#### Python Libraries
The project depends on several Python libraries listed below. You can install all required libraries using the requirements.txt file included in the project. Here's a breakdown of the major libraries:
- Flask (~=3.0.3): A micro web framework for Python, used for handling web requests.
- PyJWT (~=2.4.0): A Python library to encode, decode, and verify JSON Web Tokens.
- Requests (~=2.31.0): A library for making HTTP requests in Python.
- Werkzeug (~=3.0.2): A comprehensive WSGI web application library.
- SQLAlchemy (~=2.0.29): A SQL toolkit and Object-Relational Mapping (ORM) system for Python.
- Torch (~=2.1.2+cu118): An open-source machine learning library, particularly with CUDA 11.8 support for GPU acceleration.
- NumPy (~=1.24.3): A library for numerical computing in Python.
- Pillow (~=10.0.1): A Python Imaging Library (PIL) fork that adds image processing capabilities.
- Scikit-Learn (~=1.3.0): A library for machine learning and statistical modelling including classification, regression, clustering, and dimensionality reduction.
#### Installation
Install all Python dependencies by running the following command in your project directory where requirements.txt is located:
```[python]
pip install -r requirements.txt
```

## Installation Guide
Trust-Indicator is designed to function primarily as an online tool. The development team is in the process of deploying the tool to a server, which, once complete, can be accessed through the following link: [https://picture.au/](https://picture.au/).

In addition, Trust-Indicator is open to personal adaptions or updates. Below are the instructions for setting up locally:

**Step 1:** Installing the necessary [dependencies](#Installation). 

Python and Flask Framework.
[How to install Flask](https://phoenixnap.com/kb/install-flask)

During this process, you can check if the installation was successful. 

**Step 2:** Clone the repository to your machine.

**Step 3:** Find the python file in the directory `Trust-Indicator/src/Flask/app.py`, open it. 

**Step 4:** Double check if all packages are installed, then press `run` in app.py and click the development server link like "http://127.0.0.1:5000", which shows in the terminal if you are successfully running app.py

## Deployment Guide
Follow these steps to set up and run the Trust Indicator project on an Ubuntu 22.04 system:
#### Prerequisites
Ensure you have administrative access to an Ubuntu 22.04 server.

**Step 1**: Install Python 3.12
1. Open a terminal on your Ubuntu server.
2. Update the package list and install prerequisites:
```
sudo apt update
sudo apt install software-properties-common -y
```
3. Add the deadsnakes PPA which contains newer Python versions:
```
sudo add-apt-repository ppa:deadsnakes/ppa
```
4. Install Python 3.12:
```
sudo apt install python3.12 -y
```
**Step 2**: Upload the Project Code to the Server
1. Use a secure file transfer method like scp or rsync to upload your project files to the server. For example, using scp:
```
scp -r /path/to/local/project username@server_ip:/path/to/remote/directory
```
**Step 3**: Start a Screen Session
1. Log into your server via SSH.
2. Start a new screen session named "trust_indicator":
```
screen -S trust_indicator
```
**Step 4**: Run the Project Code
Navigate to the directory where you uploaded your project code.
Run the project using Python 3.12:
```
python app.py
```
This command starts the Flask application defined in app.py.
#### Additional Notes
- To detach from the screen session and leave the application running in the background, press Ctrl + A followed by D.
- To reattach to the screen session, use the command screen -r trust_indicator.

This guide ensures that you can set up and operate the Trust Indicator project on an Ubuntu server. Adjust the paths and parameters according to your server configuration and project specifics.

## Contact Information
All team members, except for Lingxiu, will be graduating in July 2024. Lingxiu will continue to be available at ANU. For inquiries or further information, please contact us via email at u7588748@anu.edu.au.
